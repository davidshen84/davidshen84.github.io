(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{qh0f:function(t,e,i){"use strict";i.r(e);var a=i("8Y7J");class n{}var s,r=i("pMnS");i("mrSG");class o{constructor(t,e,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=t,this._imageData=i}static getDataFromDataUrl(t,e){return t.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=o.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}const c=(()=>{let t=s=class{constructor(){this.width=640,this.height=480,this.videoOptions=s.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=s.DEFAULT_IMAGE_TYPE,this.imageQuality=s.DEFAULT_IMAGE_QUALITY,this.imageCapture=new a.m,this.initError=new a.m,this.imageClick=new a.m,this.cameraSwitched=new a.m,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(t){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=t.subscribe(()=>{this.takeSnapshot()})}set switchCamera(t){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=t.subscribe(t=>{"string"==typeof t?this.switchToVideoInput(t):this.rotateVideoInput(!1!==t)})}static getMediaConstraintsForDevice(t,e){const i=e||this.DEFAULT_VIDEO_OPTIONS;return t&&(i.deviceId={exact:t}),i}static getDeviceIdFromMediaStreamTrack(t){if(t.getSettings&&t.getSettings()&&t.getSettings().deviceId)return t.getSettings().deviceId;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().deviceId){const e=t.getConstraints().deviceId;return s.getValueFromConstrainDOMString(e)}}static getFacingModeFromMediaStreamTrack(t){if(t){if(t.getSettings&&t.getSettings()&&t.getSettings().facingMode)return t.getSettings().facingMode;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().facingMode){const e=t.getConstraints().facingMode;return s.getValueFromConstrainDOMString(e)}}}static isUserFacing(t){const e=s.getFacingModeFromMediaStreamTrack(t);return!!e&&"user"===e.toLowerCase()}static getValueFromConstrainDOMString(t){if(t){if(t instanceof String)return String(t);if(Array.isArray(t)&&Array(t).length>0)return String(t[0]);if("object"==typeof t){if(t.exact)return String(t.exact);if(t.ideal)return String(t.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(t=>{this.switchToVideoInput(t.length>0?t[0].deviceId:null)}).catch(t=>{this.initError.next({message:t}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const t=this.nativeVideoElement,e={width:this.width,height:this.height};t.videoWidth&&(e.width=t.videoWidth,e.height=t.videoHeight);const i=this.canvas.nativeElement;i.width=e.width,i.height=e.height;const a=i.getContext("2d");a.drawImage(t,0,0);const n=this.imageType?this.imageType:s.DEFAULT_IMAGE_TYPE,r=i.toDataURL(n,this.imageQuality?this.imageQuality:s.DEFAULT_IMAGE_QUALITY);let c=null;this.captureImageData&&(c=a.getImageData(0,0,i.width,i.height)),this.imageCapture.next(new o(r,n,c))}rotateVideoInput(t){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(t?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(t){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(t,this.videoOptions)}videoResize(){}get videoWidth(){const t=this.getVideoAspectRatio();return Math.min(this.width,this.height*t)}get videoHeight(){const t=this.getVideoAspectRatio();return Math.min(this.height,this.width/t)}get videoStyleClasses(){let t="";return this.isMirrorImage()&&(t+="mirrored "),t.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const t=this.nativeVideoElement;return t.videoWidth&&t.videoWidth>0&&t.videoHeight&&t.videoHeight>0?t.videoWidth/t.videoHeight:this.width/this.height}initWebcam(t,e){const i=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const a=s.getMediaConstraintsForDevice(t,e);navigator.mediaDevices.getUserMedia({video:a}).then(t=>{this.mediaStream=t,i.srcObject=t,i.play(),this.activeVideoSettings=t.getVideoTracks()[0].getSettings();const e=s.getDeviceIdFromMediaStreamTrack(t.getVideoTracks()[0]);this.activeVideoInputIndex=e?this.availableVideoInputs.findIndex(t=>t.deviceId===e):-1,this.videoInitialized=!0,this.cameraSwitched.next(e),this.detectAvailableDevices()}).catch(t=>{this.initError.next({message:t.message,mediaStreamError:t})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let t="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?t=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(t=this.mirrorImage.x.toLowerCase())),t){case"always":return!0;case"never":return!1}}return s.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach(t=>t.stop())}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((t,e)=>{(class{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((t,e)=>{navigator.mediaDevices.enumerateDevices().then(e=>{t(e.filter(t=>"videoinput"===t.kind))}).catch(t=>{e(t.message||t)})}):Promise.reject("enumerateDevices() not supported.")}}).getAvailableVideoInputs().then(e=>{this.availableVideoInputs=e,t(e)}).catch(t=>{this.availableVideoInputs=[],e(t)})})}};return t.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},t.DEFAULT_IMAGE_TYPE="image/jpeg",t.DEFAULT_IMAGE_QUALITY=.92,t})(),l=(()=>(class{}))();var g=i("SVse"),h=a.qb({encapsulation:0,styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scale(-1,1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}"],data:{}});function u(t){return a.Mb(0,[(t()(),a.sb(0,0,null,null,0,"div",[["class","camera-switch"]],null,[[null,"click"]],function(t,e,i){var a=!0;return"click"===e&&(a=!1!==t.component.rotateVideoInput(!0)&&a),a},null,null))],null,null)}function d(t){return a.Mb(0,[a.Ib(402653184,1,{video:0}),a.Ib(402653184,2,{canvas:0}),(t()(),a.sb(2,0,null,null,4,"div",[["class","webcam-wrapper"]],null,[[null,"click"]],function(t,e,i){var a=!0;return"click"===e&&(a=!1!==t.component.imageClick.next()&&a),a},null,null)),(t()(),a.sb(3,0,[[1,0],["video",1]],null,0,"video",[["autoplay",""],["muted",""],["playsinline",""]],[[8,"width",0],[8,"height",0],[8,"className",0]],[[null,"resize"]],function(t,e,i){var a=!0;return"resize"===e&&(a=!1!==t.component.videoResize()&&a),a},null,null)),(t()(),a.hb(16777216,null,null,1,null,u)),a.rb(5,16384,null,0,g.k,[a.P,a.M],{ngIf:[0,"ngIf"]},null),(t()(),a.sb(6,0,[[2,0],["canvas",1]],null,0,"canvas",[],[[8,"width",0],[8,"height",0]],null,null,null,null))],function(t,e){var i=e.component;t(e,5,0,i.allowCameraSwitch&&i.availableVideoInputs.length>1&&i.videoInitialized)},function(t,e){var i=e.component;t(e,3,0,i.videoWidth,i.videoHeight,i.videoStyleClasses),t(e,6,0,i.width,i.height)})}var m=i("XNiG"),p=i("TUr7");class v{constructor(t){this._titleService=t,this._snapshotTrigger=new m.a,this.snapshotTrigger$=this._snapshotTrigger.asObservable()}get showSnapshot(){return null!=this._image}get imageUrl(){return this._image.imageAsDataUrl}ngOnInit(){this._titleService.setTitle("Webcam"),this._canvas=this._canvasRef.nativeElement}takeSnapshot(){this._snapshotTrigger.next()}captureSnapshot(t){this._image=t;const e=this._canvas.getContext("2d");this._canvas.height=t.imageData.height,this._canvas.width=t.imageData.width;for(let i=0,a=t.imageData.data;i<a.length;i+=4)a[i]=255-a[i],a[i+1]=255-a[i+1],a[i+2]=255-a[i+2],a[i+3]=255;e.putImageData(t.imageData,0,0)}}var b=a.qb({encapsulation:0,styles:[[""]],data:{}});function A(t){return a.Mb(0,[(t()(),a.sb(0,0,[["snapshot",1]],null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(t,e){t(e,0,0,e.component.imageUrl)})}function S(t){return a.Mb(0,[a.Ib(402653184,1,{_canvasRef:0}),(t()(),a.sb(1,0,null,null,1,"webcam",[["captureImageData","true"]],null,[[null,"imageCapture"],[null,"imageClick"]],function(t,e,i){var a=!0,n=t.component;return"imageCapture"===e&&(a=!1!==n.captureSnapshot(i)&&a),"imageClick"===e&&(a=!1!==n.takeSnapshot()&&a),a},d,h)),a.rb(2,4374528,null,0,c,[],{captureImageData:[0,"captureImageData"],trigger:[1,"trigger"]},{imageCapture:"imageCapture",imageClick:"imageClick"}),(t()(),a.hb(16777216,null,null,1,null,A)),a.rb(4,16384,null,0,g.k,[a.P,a.M],{ngIf:[0,"ngIf"]},null),(t()(),a.sb(5,0,[[1,0],["canvas",1]],null,0,"canvas",[],null,null,null,null,null))],function(t,e){var i=e.component;t(e,2,0,"true",i.snapshotTrigger$),t(e,4,0,i.showSnapshot)},null)}function I(t){return a.Mb(0,[(t()(),a.sb(0,0,null,null,1,"app-webcam",[],null,null,null,S,b)),a.rb(1,114688,null,0,v,[p.a],null,null)],function(t,e){t(e,1,0)},null)}var w=a.ob("app-webcam",v,I,{},{},[]),D=i("iInd");class f{}i.d(e,"WebcamModuleNgFactory",function(){return k});var k=a.pb(n,[],function(t){return a.zb([a.Ab(512,a.j,a.cb,[[8,[r.a,w]],[3,a.j],a.x]),a.Ab(4608,g.m,g.l,[a.u,[2,g.z]]),a.Ab(1073742336,g.c,g.c,[]),a.Ab(1073742336,D.m,D.m,[[2,D.r],[2,D.k]]),a.Ab(1073742336,f,f,[]),a.Ab(1073742336,l,l,[]),a.Ab(1073742336,n,n,[]),a.Ab(1024,D.i,function(){return[[{path:"",component:v}]]},[])])})}}]);