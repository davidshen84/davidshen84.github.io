!function(){function t(e,i){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,i)}function e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=n(t);if(e){var o=n(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return i(this,a)}}function i(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{qh0f:function(i,n,a){"use strict";a.r(n),a.d(n,"WebcamModuleNgFactory",(function(){return O}));var s,u=a("8Y7J"),c=function t(){o(this,t)},l=a("pMnS"),g=function(){function t(e,i,n){o(this,t),this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=i,this._imageAsDataUrl=e,this._imageData=n}return r(t,[{key:"imageAsBase64",get:function(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=t.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}},{key:"imageAsDataUrl",get:function(){return this._imageAsDataUrl}},{key:"imageData",get:function(){return this._imageData}}],[{key:"getDataFromDataUrl",value:function(t,e){return t.replace("data:".concat(e,";base64,"),"")}}]),t}(),h=((s=function(){function t(){o(this,t),this.width=640,this.height=480,this.videoOptions=t.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=t.DEFAULT_IMAGE_TYPE,this.imageQuality=t.DEFAULT_IMAGE_QUALITY,this.imageCapture=new u.n,this.initError=new u.n,this.imageClick=new u.n,this.cameraSwitched=new u.n,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}return r(t,[{key:"ngAfterViewInit",value:function(){var t=this;this.detectAvailableDevices().then((function(){t.switchToVideoInput(null)})).catch((function(e){t.initError.next({message:e}),t.switchToVideoInput(null)}))}},{key:"ngOnDestroy",value:function(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}},{key:"takeSnapshot",value:function(){var e=this.nativeVideoElement,i={width:this.width,height:this.height};e.videoWidth&&(i.width=e.videoWidth,i.height=e.videoHeight);var n=this.canvas.nativeElement;n.width=i.width,n.height=i.height;var a=n.getContext("2d");a.drawImage(e,0,0);var r=this.imageType?this.imageType:t.DEFAULT_IMAGE_TYPE,o=n.toDataURL(r,this.imageQuality?this.imageQuality:t.DEFAULT_IMAGE_QUALITY),s=null;this.captureImageData&&(s=a.getImageData(0,0,n.width,n.height)),this.imageCapture.next(new g(o,r,s))}},{key:"rotateVideoInput",value:function(t){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(t?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}},{key:"switchToVideoInput",value:function(t){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(t,this.videoOptions)}},{key:"videoResize",value:function(){}},{key:"getVideoAspectRatio",value:function(){var t=this.nativeVideoElement;return t.videoWidth&&t.videoWidth>0&&t.videoHeight&&t.videoHeight>0?t.videoWidth/t.videoHeight:this.width/this.height}},{key:"initWebcam",value:function(e,i){var n=this,a=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var r=t.getMediaConstraintsForDevice(e,i);navigator.mediaDevices.getUserMedia({video:r}).then((function(e){n.mediaStream=e,a.srcObject=e,a.play(),n.activeVideoSettings=e.getVideoTracks()[0].getSettings();var i=t.getDeviceIdFromMediaStreamTrack(e.getVideoTracks()[0]);n.cameraSwitched.next(i),n.detectAvailableDevices().then((function(){n.activeVideoInputIndex=i?n.availableVideoInputs.findIndex((function(t){return t.deviceId===i})):-1,n.videoInitialized=!0})).catch((function(){n.activeVideoInputIndex=-1,n.videoInitialized=!0}))})).catch((function(t){n.initError.next({message:t.message,mediaStreamError:t})}))}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}},{key:"getActiveVideoTrack",value:function(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}},{key:"isMirrorImage",value:function(){if(!this.getActiveVideoTrack())return!1;var e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}return t.isUserFacing(this.getActiveVideoTrack())}},{key:"stopMediaTracks",value:function(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach((function(t){return t.stop()}))}},{key:"unsubscribeFromSubscriptions",value:function(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}},{key:"detectAvailableDevices",value:function(){return new Promise((function(t,e){}))}},{key:"trigger",set:function(t){var e=this;this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=t.subscribe((function(){e.takeSnapshot()}))}},{key:"switchCamera",set:function(t){var e=this;this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=t.subscribe((function(t){"string"==typeof t?e.switchToVideoInput(t):e.rotateVideoInput(!1!==t)}))}},{key:"videoWidth",get:function(){var t=this.getVideoAspectRatio();return Math.min(this.width,this.height*t)}},{key:"videoHeight",get:function(){var t=this.getVideoAspectRatio();return Math.min(this.height,this.width/t)}},{key:"videoStyleClasses",get:function(){var t="";return this.isMirrorImage()&&(t+="mirrored "),t.trim()}},{key:"nativeVideoElement",get:function(){return this.video.nativeElement}}],[{key:"getMediaConstraintsForDevice",value:function(t,e){var i=e||this.DEFAULT_VIDEO_OPTIONS;return t&&(i.deviceId={exact:t}),i}},{key:"getDeviceIdFromMediaStreamTrack",value:function(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){var i=e.getConstraints().deviceId;return t.getValueFromConstrainDOMString(i)}}},{key:"getFacingModeFromMediaStreamTrack",value:function(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){var i=e.getConstraints().facingMode;return t.getValueFromConstrainDOMString(i)}}}},{key:"isUserFacing",value:function(e){var i=t.getFacingModeFromMediaStreamTrack(e);return!!i&&"user"===i.toLowerCase()}},{key:"getValueFromConstrainDOMString",value:function(t){if(t){if(t instanceof String)return String(t);if(Array.isArray(t)&&Array(t).length>0)return String(t[0]);if("object"==typeof t){if(t.exact)return String(t.exact);if(t.ideal)return String(t.ideal)}}return null}}]),t}()).DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},s.DEFAULT_IMAGE_TYPE="image/jpeg",s.DEFAULT_IMAGE_QUALITY=.92,s),d=function t(){o(this,t)},m=a("SVse"),v=u.ub({encapsulation:0,styles:['.webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;line-height:0;position:relative}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC");background-position:50%;background-repeat:no-repeat;background-size:80%;border-radius:5px;cursor:pointer;height:48px;position:absolute;right:13px;top:10px;transition:background-color .2s ease;width:48px}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}'],data:{}});function p(t){return u.Xb(0,[(t()(),u.wb(0,0,null,null,0,"div",[["class","camera-switch"]],null,[[null,"click"]],(function(t,e,i){var n=!0;return"click"===e&&(n=!1!==t.component.rotateVideoInput(!0)&&n),n}),null,null))],null,null)}function f(t){return u.Xb(0,[u.Qb(402653184,1,{video:0}),u.Qb(402653184,2,{canvas:0}),(t()(),u.wb(2,0,null,null,4,"div",[["class","webcam-wrapper"]],null,[[null,"click"]],(function(t,e,i){var n=!0;return"click"===e&&(n=!1!==t.component.imageClick.next()&&n),n}),null,null)),(t()(),u.wb(3,0,[[1,0],["video",1]],null,0,"video",[["autoplay",""],["muted",""],["playsinline",""]],[[8,"width",0],[8,"height",0],[8,"className",0]],[[null,"resize"]],(function(t,e,i){var n=!0;return"resize"===e&&(n=!1!==t.component.videoResize()&&n),n}),null,null)),(t()(),u.fb(16777216,null,null,1,null,p)),u.vb(5,16384,null,0,m.k,[u.P,u.M],{ngIf:[0,"ngIf"]},null),(t()(),u.wb(6,0,[[2,0],["canvas",1]],null,0,"canvas",[],[[8,"width",0],[8,"height",0]],null,null,null,null))],(function(t,e){var i=e.component;t(e,5,0,i.allowCameraSwitch&&i.availableVideoInputs.length>1&&i.videoInitialized)}),(function(t,e){var i=e.component;t(e,3,0,i.videoWidth,i.videoHeight,i.videoStyleClasses),t(e,6,0,i.width,i.height)}))}var b=a("2u97"),w=a("iInd"),A=a("XNiG"),S=a("TUr7"),k=function(i){!function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),i&&t(e,i)}(a,i);var n=e(a);function a(t,e){var i;return o(this,a),(i=n.call(this,e))._snapshotTrigger=new A.a,i.snapshotTrigger$=i._snapshotTrigger.asObservable(),t.setTitle("Webcam"),i}return r(a,[{key:"ngOnInit",value:function(){this._canvas=this._canvasRef.nativeElement}},{key:"takeSnapshot",value:function(){this._snapshotTrigger.next()}},{key:"captureSnapshot",value:function(t){this._image=t;var e=this._canvas.getContext("2d");this._canvas.height=t.imageData.height,this._canvas.width=t.imageData.width;for(var i=0,n=t.imageData.data;i<n.length;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2],n[i+3]=255;e.putImageData(t.imageData,0,0)}},{key:"showSnapshot",get:function(){return null!=this._image}},{key:"imageUrl",get:function(){return this._image.imageAsDataUrl}}]),a}(a("Ng4T").a),I=u.ub({encapsulation:0,styles:[[""]],data:{}});function y(t){return u.Xb(0,[(t()(),u.wb(0,0,[["snapshot",1]],null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.imageUrl)}))}function D(t){return u.Xb(2,[u.Qb(402653184,1,{_canvasRef:0}),(t()(),u.wb(1,0,null,null,1,"webcam",[["captureImageData","true"]],null,[[null,"imageCapture"],[null,"imageClick"]],(function(t,e,i){var n=!0,a=t.component;return"imageCapture"===e&&(n=!1!==a.captureSnapshot(i)&&n),"imageClick"===e&&(n=!1!==a.takeSnapshot()&&n),n}),f,v)),u.vb(2,4374528,null,0,h,[],{captureImageData:[0,"captureImageData"],trigger:[1,"trigger"]},{imageCapture:"imageCapture",imageClick:"imageClick"}),(t()(),u.fb(16777216,null,null,1,null,y)),u.vb(4,16384,null,0,m.k,[u.P,u.M],{ngIf:[0,"ngIf"]},null),(t()(),u.wb(5,0,[[1,0],["canvas",1]],null,0,"canvas",[],null,null,null,null,null))],(function(t,e){var i=e.component;t(e,2,0,"true",i.snapshotTrigger$),t(e,4,0,i.showSnapshot)}),null)}var C=u.sb("app-webcam",k,(function(t){return u.Xb(0,[(t()(),u.wb(0,0,null,null,2,"app-webcam",[],null,null,null,D,I)),u.Pb(512,null,b.a,b.a,[w.l]),u.vb(2,114688,null,0,k,[S.a,b.a],null,null)],(function(t,e){t(e,2,0)}),null)}),{},{},[]),T=function t(){o(this,t)},O=u.tb(c,[],(function(t){return u.Hb([u.Ib(512,u.j,u.Y,[[8,[l.a,C]],[3,u.j],u.x]),u.Ib(4608,m.m,m.l,[u.u]),u.Ib(1073742336,m.c,m.c,[]),u.Ib(1073742336,w.n,w.n,[[2,w.s],[2,w.l]]),u.Ib(1073742336,T,T,[]),u.Ib(1073742336,d,d,[]),u.Ib(1073742336,c,c,[]),u.Ib(1024,w.j,(function(){return[[{path:"",component:k}]]}),[])])}))}}])}();